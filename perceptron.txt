Problématique
-------------

Pour une image donnée, on cherche à la comparer à un motif. Il nous faut alors
une notion de distance qui permette, si possible, de dire dans l’absolu si
l’image correspond.

Prétraitement
-------------

1. Convertir l’image en blanc sur noir avec un threshold.
2. Supprimer le bruit par érosion.
3. Scinder les lettres.
4. Couper les bords.
5. Normaliser la taille.

Distance
--------

### Inclusion

Ma première idée était d’avoir un motif artificiel en noir et blanc.

En comparant les pixels, on peut établir une distance, mais le problème est que
les bordures causent beaucoup de fausses erreurs. Un pixel de différence autour
d’une bordure et loin d’une bordure n’ont pas du tout le même impact.

J’avais alors pensé à vérifier que l’image érodée est contenue dans le motif,
et que le motif est contenu dans l’image dilatée. Sachant que la photo peut
contenir du bruit, mieux vaut éroder/dilater la photo que le motif.

### Motif tricolore

Un modèle plus simple à appliquer, et plus parlant visuellement, serait de
créer un motif où les pixels noirs et blancs doivent être identiques sur la
photo, tandis que les pixels gris du motif n’ont pas dimportance sur la photo.

Pour générer le motif, on peut soit partir d’une motif artificiel avec un
contour gris, ou bien partir d’un jeu de données existants et générer en blanc
l’intersection de tous les échantillons, puis en gros leur union.

### Coefficients

Pour calculer la distance proposée ci-dessus avec des matrics, le plus simple
serait de normaliser les données de l’image et du motif de [0, 255] à [-1, 1].
La photo aura des pixels à -1 ou 1, tandis que le motif sera -1, 0 ou 1. La
multiplication par élément donnera alors des -1 pour les erreurs, 1 pour les
correspondances, et 0 pour ce qui n’a pas d’importance.

La somme donnera un indice de correspondance. La somme valant au plus la somme
de la valeur absolue de tous les pixels du motif, on peut la diviser par ce
maximum pour obtenir un indice entre -1 et 1. On peut ensuite la transformer
entre 0 et 1 ou avoir un indice de correspondance intuitif.

Ce modèle fonctionnera très bien pour un motif en niveau de gris. Dans ce cas,
on pourrait naïvement générer le motif comme la moyenne de tous les
échantillons.

Données d’entrainement
----------------------

Pour se permettre d’ajuster l’algorithme sans regénérer tout le jeu de données,
utilisons comme entrée des morceaux de photos.

Il nous faudra de bonnes données et de mauvaises données, avec éventuellement
un jeu de test pour la validation.
